//Text included in the following modules:

:_content-type: SNIPPET

= AWS managed versus customer managed encryption keys

Customers often encrypt their disks with encryption keys for added security. There are two ways to generate encryption keys:

* Use Amazon's default encryption key (AWS managed)
* Bring your own encryption key (customer managed)

AWS managed encryption keys are easy to set up and use. Customers under no regulatory or compliance requirements who want to get started quickly often choose an AWS managed encryption key and encrypt their disks with a default OIDC provider ID generated automatically by AWS at cluster creation.

Customer managed encryption keys fulfill certain regulatory or security requirements. Customers who must meet regulatory requirements such as HIPPA or SOC2 and customers in foreign countries often need to generate and manage encryption keys in their own environment. Mail services, for example, are government entities that must abide by strict regulations. To stay compliant, a mail service would encrypt their disks with Key Management Service (KMS) keys generated from their own OIDC provider ID.

You must first create an OIDC provider and then use the OIDC provider's ID to generate a KMS key. The OIDC provider ID can be generated two ways, by default with an AWS managed encryption key or the customer can provide their own using a managed encryption key. 

Customers with AWS managed encryption keys rely on the default OIDC provider to create and encrypt keys. In this case, the KMS key is automatically generated and stored in your account after cluster creation.

Customers with customer managed encryption keys create their own OIDC provider before cluster creation using the `rosa create oidc-config -- managed` command. This command produces an ID which is used to generate KMS keys and encrypt the disks during cluster creation.
